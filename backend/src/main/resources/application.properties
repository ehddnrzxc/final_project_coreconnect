# WebSocket 허용 Origin 설정 (쉼표로 구분하여 여러 Origin 지정 가능)
# 환경 변수 WEBSOCKET_ALLOWED_ORIGINS로 오버라이드 가능
# 예: http://localhost:5173,http://13.125.225.211,https://yourdomain.com
app.websocket.allowed-origins=${WEBSOCKET_ALLOWED_ORIGINS}

# CORS 허용 Origin 설정 (쉼표로 구분하여 여러 Origin 지정 가능)
# 환경 변수 CORS_ALLOWED_ORIGINS로 오버라이드 가능
# 예: http://localhost:5173,http://13.125.225.211,https://yourdomain.com
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS}

spring.application.name=coreconnect

# database
# Spring Boot는 SPRING_DATASOURCE_* 환경 변수를 자동으로 인식합니다.
# docker-compose.yml에서 SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD로 전달됩니다.
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# jpa
spring.jpa.database=mysql
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.ddl-auto=none

# S3 기본설정
cloud.aws.credentials.access-key=${AWS_ACCESS_KEY_ID}
cloud.aws.credentials.secret-key=${AWS_SECRET_ACCESS_KEY}
cloud.aws.region.static=${AWS_REGION}
cloud.aws.s3.bucket=${AWS_BUCKET_NAME}

# SendGrid 메일 서버 설정
sendgrid.api.key=${SENDGRID_API_KEY}
sendgrid.from.email=no-reply@your-domain.com
sendgrid.from.name=YourAppName

# MyBatis 관련 기본 설정
mybatis.mapper-locations=classpath:/mappers/**/*.xml
mybatis.type-aliases-package=com.goodee.coreconnect
mybatis.configuration.map-underscore-to-camel-case=true

# 기본 활성 프로필
spring.profiles.active=secure

# JWT 설정
jwt.secret=${JWT_SECRET_KEY}

# 쿠키 보안 설정 (배포 환경에서는 true로 설정)
# 환경 변수 COOKIE_SECURE로 오버라이드 가능
# HTTPS 환경에서는 true, 로컬 개발(HTTP)에서는 false
app.cookie.secure=${COOKIE_SECURE:false}

# 쿠키 SameSite 설정
# 환경 변수 COOKIE_SAME_SITE로 오버라이드 가능
# "Strict", "Lax", "None" 중 선택 (None은 secure=true일 때만 사용 가능)
app.cookie.same-site=${COOKIE_SAME_SITE:Lax}

# 이메일 설정
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# SMTP 인증 및 TLS 설정
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# 디버깅용 설정
logging.level.org.hibernate.tool.schema.internal=DEBUG

# 업로드 파일 1개 최대 용량
spring.servlet.multipart.max-file-size=50MB
# 업로드 요청 전체 용량(여러 파일 합계) 최대
spring.servlet.multipart.max-request-size=100MB

# redis
#spring.data.redis.host=127.0.0.1
#spring.data.redis.port=6379
#spring.data.redis.password=1111
#spring.data.redis.timeout=2000ms

# SpringDoc 설정 (Spring Boot 3.3.5 호환성)
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.packages-to-scan=com.goodee.coreconnect
# WebJars 리소스 해결자 비활성화 (LiteWebJarsResourceResolver 문제 해결)
springdoc.swagger-ui.use-root-path=false


